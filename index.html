<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Usuário - ampop</title>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-firestore.js"></script>
</head>
<body>

    <h1>Cadastro de Usuário</h1>

    <!-- Formulário de cadastro -->
    <form id="formCadastro">
        <label for="nome">Nome:</label>
        <input type="text" id="nome" required>
        <br>
        <label for="email">E-mail:</label>
        <input type="email" id="email" required>
        <br>
        <label for="dispositivos">Dispositivos:</label>
        <input type="text" id="dispositivos" placeholder="esp32-001, esp32-002" required>
        <br>
        <button type="submit">Cadastrar</button>
    </form>

    <script>
        // Sua configuração do Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyDJ6N3zQkTzyiMR27pfvE-iE1qCE_5zavg",
            authDomain: "ampop-4c96f.firebaseapp.com",
            projectId: "ampop-4c96f",
            storageBucket: "ampop-4c96f.appspot.com",
            messagingSenderId: "1008863242618",
            appId: "1:1008863242618:web:caab3844b7af163d0a0ec3"
        };

        // Inicializando o Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Função para cadastrar o usuário
        document.getElementById('formCadastro').addEventListener('submit', function(e) {
            e.preventDefault();

            const nome = document.getElementById('nome').value;
            const email = document.getElementById('email').value;
            const dispositivos = document.getElementById('dispositivos').value.split(',');

            console.log('Dados para salvar:', nome, email, dispositivos);

            // Criar um documento no Firestore com os dados do usuário
            db.collection('usuarios').add({
                nome: nome,
                email: email,
                dispositivos: dispositivos
            }).then(() => {
                alert('Usuário cadastrado com sucesso!');
                // Limpar o formulário após o cadastro
                document.getElementById('formCadastro').reset();
            }).catch((error) => {
                console.error("Erro ao cadastrar usuário: ", error);
                alert("Erro ao cadastrar usuário: " + error.message);
            });
        });
    </script>

</body>
</html>
