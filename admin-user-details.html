<!-- admin-user-details.html -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Detalhes do Usuário</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDJ6N3zQkTzyiMR27pfvE-iE1qCE_5zavg",
      authDomain: "ampop-4c96f.firebaseapp.com",
      projectId: "ampop-4c96f",
      storageBucket: "ampop-4c96f.appspot.com",
      messagingSenderId: "1008863242618",
      appId: "1:1008863242618:web:caab3844b7af163d0a0ec3"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>
</head>
<body>
  <h2>Detalhes do Usuário</h2>
  <div id="detalhes"></div>
  <button onclick="excluirUsuario()">Excluir</button>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const id = urlParams.get("id");

    db.collection("usuarios").doc(id).get().then(doc => {
      if (doc.exists) {
        const data = doc.data();
        document.getElementById("detalhes").innerHTML =
          `<p><b>Nome:</b> ${data.nome}</p>
           <p><b>Email:</b> ${data.email}</p>
           <p><b>Dispositivos:</b> ${data.dispositivos}</p>`;
      }
    });

    function excluirUsuario() {
      if (confirm("Tem certeza que deseja excluir este usuário?")) {
        db.collection("usuarios").doc(id).delete().then(() => {
          alert("Usuário excluído com sucesso.");
          location.href = "admin-dashboard.html";
        });
      }
    }
  </script>
</body>
</html>
